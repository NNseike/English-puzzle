<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>英語文法パズル（5ボタン固定／正解スロット置換）</title>
  <style>
    /* リセット */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 1rem;
      text-align: center;
      position: relative; /* 紙吹雪用 */
    }

    h1 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .sentence-box {
      border: 1px solid #ccc;
      padding: 1rem;
      min-height: 50px;
      background-color: #fff;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      text-align: left;
    }

    .words {
      display: grid;
      grid-template-columns: repeat(5, 1fr); /* 常に5列 */
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .word {
      background-color: #007BFF;
      color: #fff;
      padding: 0.75rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 0.9rem;
      border: none;
      transition: background-color 0.2s, transform 0.1s;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.15);
    }

    .word:hover {
      background-color: #0056b3;
      transform: scale(1.05);
      box-shadow: 3px 3px 7px rgba(0,0,0,0.2);
    }

    .used-up {
      background-color: #6c757d !important;
      cursor: not-allowed;
    }

    .feedback {
      margin-top: 0.5rem;
      font-weight: bold;
      min-height: 1.5rem;
    }

    .hint-button, .next-button {
      display: none;
      width: 100%;
      padding: 0.75rem;
      margin-top: 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .hint-button {
      background-color: #ffc107;
      color: #333;
    }
    .hint-button:hover {
      background-color: #ffb300;
    }
    .next-button {
      background-color: #28a745;
      color: #fff;
    }
    .next-button:hover {
      background-color: #218838;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.25rem;
      }
      .sentence-box {
        font-size: 0.95rem;
      }
      .word {
        font-size: 0.85rem;
        padding: 0.5rem;
      }
      .hint-button, .next-button {
        font-size: 0.9rem;
      }
    }

    /* 紙吹雪 */
    .confetti {
      position: absolute;
      pointer-events: none;
      z-index: 1000;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #fce18a;
      top: 0;
      left: 0;
      opacity: 0;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>英語文法パズル</h1>
  <h3 id="japanese-sentence"></h3>

  <div class="sentence-box" id="sentence-box"></div>
  <div class="words" id="word-buttons"></div>
  <div class="feedback" id="feedback"></div>
  <button id="hint-button" class="hint-button">ヒント</button>
  <button id="next-button" class="next-button">次に進む</button>
</div>

<div class="confetti" id="confetti-container"></div>

<script>
  const sentences = [
  {
    japanese: "私は毎日コーヒーを飲みながら新聞を読むのが日課ですが、日曜日だけは家族と一緒に公園に行き、ボードゲームを楽しむことにしています。",
    english: "I make it a habit to drink coffee and read the newspaper every day, but on Sundays, I go to the park with my family to enjoy playing board games.",
  },
  {
    japanese: "昨日はとても忙しい日で、朝から昼までオンライン会議があり、午後にはジムに行き、その後友人と夕食を楽しみました。",
    english: "Yesterday was such a busy day; I had online meetings from morning until noon, went to the gym in the afternoon, and then enjoyed dinner with my friend.",
  },
  {
    japanese: "私は旅行が好きで、特に美しい自然や歴史的な街並みを見ることができる場所を訪れるのが大好きです。",
    english: "I love traveling, especially visiting places where I can see beautiful nature and historical cityscapes.",
  },
  {
    japanese: "この本は、科学者がどのように複雑な問題を解決するかについて非常に興味深い洞察を提供してくれます。",
    english: "This book provides fascinating insights into how scientists solve complex problems.",
  },
  {
    japanese: "将来は、地球温暖化を防ぐための解決策を研究する科学者になりたいと考えています。",
    english: "In the future, I want to become a scientist who researches solutions to prevent global warming.",
  },
  {
    japanese: "私の母は料理がとても上手で、特に彼女の作るパスタ料理は家族全員のお気に入りです。",
    english: "My mother is an excellent cook, and her pasta dishes, in particular, are a favorite of the whole family.",
  },
  {
    japanese: "来年、私たちは新しい家に引っ越す予定で、その家には庭があり、ガーデニングを楽しむのが待ち遠しいです。",
    english: "Next year, we are planning to move to a new house that has a garden, and I can’t wait to enjoy gardening.",
  },
  {
    japanese: "彼女は常に新しいアイデアを考え出し、問題に対して創造的な解決策を見つけるのが得意です。",
    english: "She is always coming up with new ideas and is excellent at finding creative solutions to problems.",
  },
  {
    japanese: "私たちの町では、毎年夏に大規模なお祭りが開催され、地元の人々や観光客がたくさん集まります。",
    english: "In our town, a large festival is held every summer, attracting many locals and tourists.",
  },
  {
    japanese: "週末には、友人と一緒に映画を見るか、新しいレストランを試すのが私たちの楽しみです。",
    english: "On weekends, my friends and I enjoy either watching movies or trying out new restaurants.",
  },
  {
    japanese: "A: 昨日新しいカフェに行ったんだけど、すごく良かったよ。\nB: 本当に？どんな雰囲気だったの？\nA: とても落ち着いた感じで、コーヒーも美味しかった。\nB: 場所はどこ？今度一緒に行こうよ。\nA: 駅から徒歩5分くらいのところだよ。ぜひ行こう！",
    english: "A: I went to a new café yesterday, and it was amazing.\nB: Really? What was the atmosphere like?\nA: It was very relaxing, and the coffee was great.\nB: Where is it? Let's go together next time.\nA: It's about a 5-minute walk from the station. Let's definitely go!",
  },
  {
    japanese: "A: 最近何か新しい趣味を始めた？\nB: 実はギターを始めたんだ。すごく楽しいよ。\nA: それは素晴らしい！どんな曲を弾いてるの？\nB: まだ簡単な曲だけど、練習するのが楽しい。\nA: いつか聞かせてね！",
    english: "A: Have you started any new hobbies lately?\nB: Actually, I started playing the guitar. It's so much fun.\nA: That's awesome! What kind of songs are you playing?\nB: Just simple ones for now, but practicing is really enjoyable.\nA: You have to play for me sometime!",
  },
  {
    japanese: "A: 昨日のパーティーどうだった？\nB: すごく楽しかったよ！たくさんの人と話した。\nA: それは良かったね！何か面白いことあった？\nB: 実は、友達が急に歌いだして、みんな大笑いしたんだ。\nA: 面白そうだね！次は私も呼んでね。",
    english: "A: How was the party yesterday?\nB: It was so much fun! I talked to a lot of people.\nA: That's great! Did anything funny happen?\nB: Actually, a friend of mine suddenly started singing, and everyone burst out laughing.\nA: That sounds hilarious! Invite me next time.",
  },
  {
    japanese: "A: 映画館に行く予定はある？\nB: 来週、新しいSF映画を見に行くつもりだよ。\nA: あれ、評判がすごくいいよね！\nB: そうそう、だからとても楽しみなんだ。\nA: じゃあ感想を教えてね！",
    english: "A: Do you have any plans to go to the movies?\nB: I'm planning to watch the new sci-fi movie next week.\nA: Oh, I've heard it's really good!\nB: Yeah, that's why I'm really excited about it.\nA: Let me know what you think!",
  },
  {
    japanese: "A: 旅行の計画はどうなってる？\nB: 来月、京都に行く予定だよ。\nA: 素晴らしい！何を見る予定？\nB: 清水寺とか嵐山とか、有名な場所を回る予定。\nA: 写真をたくさん撮ってね！",
    english: "A: How's your travel plan going?\nB: I'm planning to go to Kyoto next month.\nA: Amazing! What are you planning to see?\nB: Places like Kiyomizu Temple and Arashiyama, the famous spots.\nA: Make sure to take lots of photos!",
  },
  {
    japanese: "A: 最近読んだ本でおすすめはある？\nB: 「沈黙の春」を読んだけど、環境問題についてすごく考えさせられたよ。\nA: 面白そう！今度貸してくれる？\nB: もちろんです！終わったら教えてね。\nA: ありがとう！楽しみにしてるよ。",
    english: "A: Do you have any book recommendations from what you've read recently?\nB: I read 'Silent Spring,' and it really made me think about environmental issues.\nA: That sounds interesting! Can you lend it to me sometime?\nB: Of course! Just let me know when you're done.\nA: Thanks! I'm looking forward to it.",
  },
  {
    japanese: "A: 昨日のサッカーの試合見た？\nB: 見たよ！最後のゴールは信じられないくらい素晴らしかったね。\nA: だよね！あの選手、本当にすごいよ。\nA: 次の試合も見逃せないね。\nA: 絶対に見るよ。一緒に観戦しよう！",
    english: "A: Did you watch the soccer match yesterday?\nB: I did! That last goal was unbelievably amazing.\nA: Right? That player is truly incredible.\nB: We can't miss the next match.\nA: I'll definitely watch it. Let's watch it together!",
  },
  {
    japanese: "A: 最近健康に気を使ってる？\nB: そうだね、週に3回はジムに行くようにしてる。\nA: すごい！どんな運動してるの？\nB: ウエイトトレーニングとランニングをしてるよ。\nA: それは良いね！私も始めようかな。",
    english: "A: Have you been taking care of your health recently?\nB: Yeah, I've been trying to go to the gym three times a week.\nA: That's great! What kind of exercises do you do?\nB: I do weight training and running.\nA: That sounds good! Maybe I should start too.",
  },
  {
    japanese: "A: この週末、何か予定ある？\nB: 特にないけど、のんびりしようかなと思ってる。\nA: それなら新しいカフェに行かない？\nB: 良いね！どこにあるの？\nA: 駅の近くだよ。行ってみよう！",
    english: "A: Do you have any plans for this weekend?\nB: Not really, but I'm thinking of just relaxing.\nA: Then how about checking out a new café?\nB: Sounds good! Where is it?\nA: It's near the station. Let's go check it out!",
  },
  {
    japanese: "A: 最近、何か面白い映画見た？\nB: 「インセプション」を見たけど、頭を使う映画だったよ。\nA: ああ、あれはいいよね！私も大好き。\nB: 本当に？次は一緒に映画館に行こう。\nA: ぜひ行こう！楽しみだね。",
    english: "A: Have you watched any interesting movies recently?\nB: I watched 'Inception,' and it was a real brain teaser.\nA: Oh, that's a great one! I love it too.\nB: Really? Let's go to the cinema together next time.\nA: Definitely! I'm looking forward to it.",
  },
  {
    japanese: "A: この近くに良いレストランはありますか？\nB: はい、徒歩5分のところに素晴らしいイタリアンレストランがあります。\nA: それは良いですね！名前を教えてもらえますか？\nB: もちろんです。『トラットリア・マリオ』です。\nA: ありがとう！早速行ってみます。",
    english: "A: Is there a good restaurant near here?\nB: Yes, there is a great Italian restaurant about a 5-minute walk from here.\nA: That sounds great! Can you tell me the name?\nB: Sure, it's called 'Trattoria Mario.'\nA: Thank you! I'll check it out right away.",
  },
  {
    japanese: "A: タクシーで空港までどのくらいかかりますか？\nB: 大体30分くらいです。ただ、渋滞があると少し時間がかかるかもしれません。\nA: わかりました。料金はどれくらいですか？\nB: 大体40ドルほどです。\nA: ありがとう！今すぐタクシーを呼んでもらえますか？",
    english: "A: How long does it take to get to the airport by taxi?\nB: It takes about 30 minutes, but it might take a bit longer if there's traffic.\nA: Got it. How much does it cost?\nB: It's about 40 dollars.\nA: Thanks! Could you call a taxi for me now?",
  },
  {
    japanese: "A: この列車は何時に出発しますか？\nB: 午後2時ちょうどに出発します。\nA: チケットはどこで買えますか？\nB: 駅の窓口か自動券売機で購入できます。\nA: ありがとう！",
    english: "A: What time does this train leave?\nB: It leaves at 2 PM sharp.\nA: Where can I buy tickets?\nB: You can purchase them at the ticket counter or the vending machine.\nA: Thank you!",
  },
  {
    japanese: "A: このホテルにチェックインしたいのですが。\nB: もちろんです。予約番号を教えていただけますか？\nA: はい、これが予約確認書です。\nB: 確認しました。お部屋は5階です。\nA: ありがとう！",
    english: "A: I'd like to check into this hotel.\nB: Of course. Could you provide your reservation number?\nA: Sure, here is my booking confirmation.\nB: Got it. Your room is on the 5th floor.\nA: Thank you!",
  },
  {
    japanese: "A: 観光地の地図はありますか？\nB: こちらにあります。主要なスポットが載っています。\nA: これは無料ですか？\nB: はい、無料です。\nA: ありがとう！これで観光を楽しめそうです。",
    english: "A: Do you have a map of tourist attractions?\nB: Here it is. It includes the main spots.\nA: Is this free?\nB: Yes, it's free.\nA: Thanks! This will make my sightseeing more enjoyable.",
  },
  {
    japanese: "A: クレジットカードは使えますか？\nB: はい、VisaとMastercardがご利用いただけます。\nA: それは助かります！現金をあまり持っていないので。\nB: 問題ありません。どうぞお使いください。\nA: ありがとうございます。",
    english: "A: Can I use a credit card here?\nB: Yes, we accept Visa and Mastercard.\nA: That’s helpful! I don’t have much cash on me.\nB: No problem at all. Please feel free to use it.\nA: Thank you.",
  },
  {
    japanese: "A: 空港でWi-Fiは使えますか？\nB: はい、無料のWi-Fiがあります。ネットワーク名は『FreeAirportWiFi』です。\nA: パスワードは必要ですか？\nB: いいえ、必要ありません。\nA: ありがとう！",
    english: "A: Is Wi-Fi available at the airport?\nB: Yes, there is free Wi-Fi. The network name is 'FreeAirportWiFi.'\nA: Do I need a password?\nB: No, you don’t.\nA: Thank you!",
  },
  {
    japanese: "A: この博物館の入場料はいくらですか？\nB: 大人は10ドル、子供は5ドルです。\nA: クレジットカードで支払いはできますか？\nB: はい、できます。\nA: わかりました。大人2人分をお願いします。",
    english: "A: How much is the admission fee for this museum?\nB: It’s $10 for adults and $5 for children.\nA: Can I pay by credit card?\nB: Yes, you can.\nA: Alright, I’d like two adult tickets, please.",
  },
  {
    japanese: "A: おすすめのお土産はありますか？\nB: 地元の特産品として、このクッキーが人気です。\nA: 美味しそうですね！試食できますか？\nB: もちろんです。こちらをどうぞ。\nA: ありがとう！買います。",
    english: "A: Do you have any recommendations for souvenirs?\nB: These cookies are popular as a local specialty.\nA: They look delicious! Can I try one?\nB: Of course. Here you go.\nA: Thanks! I’ll buy them.",
  },
  {
    japanese: "A: 空港バスの乗り場はどこですか？\nB: 3番出口のすぐ外にあります。\nA: チケットはどこで買えますか？\nB: バスの運転手から直接購入できます。\nA: ありがとう！",
    english: "A: Where is the airport bus stop?\nB: It’s just outside Exit 3.\nA: Where can I buy tickets?\nB: You can buy them directly from the bus driver.\nA: Thank you!",
  },
  {
    japanese: "私は毎朝7時に起きます。",
    english: "I wake up at 7 o'clock every morning.",
  },
  {
    japanese: "彼は毎週金曜日にテニスをします。",
    english: "He plays tennis every Friday.",
  },
  {
    japanese: "私たちは昨夜映画を見ました。",
    english: "We watched a movie last night.",
  },
  {
    japanese: "彼女は今、本を読んでいます。",
    english: "She is reading a book right now.",
  },
  {
    japanese: "私は次の月曜日に友達に会う予定です。",
    english: "I am going to meet my friend next Monday.",
  },
  {
    japanese: "彼らは学校にバスで行きます。",
    english: "They go to school by bus.",
  },
  {
    japanese: "私は新しいカメラを買いたいと思っています。",
    english: "I want to buy a new camera.",
  },
  {
    japanese: "私の兄は大学で数学を勉強しています。",
    english: "My brother studies mathematics at university.",
  },
  {
    japanese: "そのレストランは10時に閉まります。",
    english: "The restaurant closes at 10 o'clock.",
  },
  {
    japanese: "私はコーヒーより紅茶が好きです。",
    english: "I like tea more than coffee.",
  },
  {
    japanese: "天気が良いので散歩に行きましょう。",
    english: "Since the weather is nice, let's go for a walk.",
  },
  {
    japanese: "次の電車は何時に出発しますか？",
    english: "What time does the next train leave?",
  },
  {
    japanese: "私は料理が得意ではありませんが、挑戦するのが好きです。",
    english: "I am not good at cooking, but I enjoy trying.",
  },
  {
    japanese: "彼女は日本語とフランス語を話すことができます。",
    english: "She can speak Japanese and French.",
  },
  {
    japanese: "私は明日の会議のために資料を準備しています。",
    english: "I am preparing materials for tomorrow's meeting.",
  },
  {
    japanese: "あの映画は評判が良いので、見る価値があります。",
    english: "That movie has a good reputation, so it's worth watching.",
  },
  {
    japanese: "この問題を解決するために、何か良いアイデアはありますか？",
    english: "Do you have any good ideas to solve this problem?",
  },
  {
    japanese: "私は将来、世界中を旅してみたいです。",
    english: "In the future, I would like to travel around the world.",
  },
  {
    japanese: "駅に行く最短の道を教えていただけますか？",
    english: "Can you tell me the shortest way to the station?",
  },
  {
    japanese: "彼はそのプロジェクトを成功させるために一生懸命働いています。",
    english: "He is working hard to make the project successful.",
  },
  {
    japanese: "彼は新しい映画を見たことがありますか？",
    english: "Has he watched the new movie?",
  },
  {
    japanese: "あなたは最近何か面白い本を読みましたか？",
    english: "Have you read any interesting books lately?",
  },
  {
    japanese: "このプロジェクトは終わりそうにありません。",
    english: "This project doesn't seem like it will end.",
  },
  {
    japanese: "彼女はそのイベントに来る予定ですか？",
    english: "Is she coming to the event?",
  },
  {
    japanese: "私たちは彼のアイデアを完全に理解していません。",
    english: "We don’t fully understand his idea.",
  },
  {
    japanese: "あなたはその会議に参加する予定ですか？",
    english: "Are you planning to join the meeting?",
  },
  {
    japanese: "彼らはそのニュースについて知っていると思いますか？",
    english: "Do you think they know about the news?",
  },
  {
    japanese: "私は彼が言ったことを信じていません。",
    english: "I don’t believe what he said.",
  },
  {
    japanese: "彼女はこの町に住んでいますよね？",
    english: "She lives in this town, doesn’t she?",
  },
  {
    japanese: "これが最後のチャンスだと思いませんか？",
    english: "Don’t you think this is the last chance?",
  },
  {
    japanese: "私は今朝からずっとこの問題に取り組んでいます。",
    english: "I have been working on this problem since this morning.",
  },
  {
    japanese: "彼女はその本を昨日読み終えました。",
    english: "She finished reading the book yesterday.",
  },
  {
    japanese: "彼らは次の週末に新しい家に引っ越す予定です。",
    english: "They are moving to a new house next weekend.",
  },
  {
    japanese: "私たちは来月旅行に行くつもりです。",
    english: "We are going to travel next month.",
  },
  {
    japanese: "私はすでに昼食を食べました。",
    english: "I have already had lunch.",
  },
  {
    japanese: "明日のこの時間、私はプレゼンテーションをしているでしょう。",
    english: "At this time tomorrow, I will be giving a presentation.",
  },
  {
    japanese: "彼はその本を5回も読んだことがあります。",
    english: "He has read that book five times.",
  },
  {
    japanese: "このプロジェクトは来週までには完了しているはずです。",
    english: "This project will have been completed by next week.",
  },
  {
    japanese: "彼女はずっとピアノを弾いています。",
    english: "She has been playing the piano.",
  },
  {
    japanese: "私は先週から新しい仕事を始めました。",
    english: "I started a new job last week.",
  },
  {
    japanese: "もし私があなたなら、その仕事を引き受けます。",
    english: "If I were you, I would take the job.",
  },
  {
    japanese: "雨が降らなければ、ピクニックに行きましょう。",
    english: "If it doesn't rain, let's go for a picnic.",
  },
  {
    japanese: "もっと早く出発していれば、電車に間に合ったかもしれません。",
    english: "If we had left earlier, we might have caught the train.",
  },
  {
    japanese: "十分なお金があれば、その家を買いたいです。",
    english: "If I had enough money, I would buy that house.",
  },
  {
    japanese: "もっと時間があれば、旅行に行くのに。",
    english: "If I had more time, I would go on a trip.",
  },
  {
    japanese: "彼が手伝ってくれれば、もっと早く終わるでしょう。",
    english: "If he helps us, we will finish sooner.",
  },
  {
    japanese: "もし努力しなければ、目標を達成できません。",
    english: "If you don't make an effort, you can't achieve your goals.",
  },
  {
    japanese: "もっと勉強していたら、試験に合格していただろうに。",
    english: "If I had studied harder, I would have passed the exam.",
  },
  {
    japanese: "時間があれば手伝えるのに。",
    english: "If I had the time, I could help you.",
  },
  {
    japanese: "彼女が招待してくれたら、パーティーに行くでしょう。",
    english: "If she invites me, I will go to the party.",
  },
  {
    japanese: "この本はあの本よりも面白いです。",
    english: "This book is more interesting than that one.",
  },
  {
    japanese: "彼はクラスで最も背が高い生徒です。",
    english: "He is the tallest student in the class.",
  },
  {
    japanese: "このコーヒーは紅茶よりも強い味がします。",
    english: "This coffee tastes stronger than tea.",
  },
  {
    japanese: "このレストランは町で一番人気があります。",
    english: "This restaurant is the most popular in town.",
  },
  {
    japanese: "今日の天気は昨日よりも暑いです。",
    english: "The weather today is hotter than yesterday.",
  },
  {
    japanese: "彼女の歌声は私の声よりも美しいです。",
    english: "Her singing voice is more beautiful than mine.",
  },
  {
    japanese: "この映画はこれまで見た中で最高の映画です。",
    english: "This is the best movie I have ever seen.",
  },
  {
    japanese: "彼は兄弟の中で一番速く走ることができます。",
    english: "He can run the fastest among his siblings.",
  },
  {
    japanese: "この問題は他のどの問題よりも難しいです。",
    english: "This problem is more difficult than any other problem.",
  },
  {
    japanese: "このホテルは街の他のホテルよりも高価です。",
    english: "This hotel is more expensive than other hotels in the city.",
  },
  {
    japanese: "この部屋は毎日掃除されます。",
    english: "This room is cleaned every day.",
  },
  {
    japanese: "その手紙は昨日彼によって書かれました。",
    english: "The letter was written by him yesterday.",
  },
  {
    japanese: "この本は多くの学生に読まれています。",
    english: "This book is read by many students.",
  },
  {
    japanese: "新しいショッピングモールが建設されています。",
    english: "A new shopping mall is being built.",
  },
  {
    japanese: "そのプレゼントは彼女に渡されました。",
    english: "The gift was given to her.",
  },
  {
    japanese: "その家は去年売られました。",
    english: "The house was sold last year.",
  },
  {
    japanese: "この写真はプロのカメラマンによって撮影されました。",
    english: "This photo was taken by a professional photographer.",
  },
  {
    japanese: "その問題はまだ解決されていません。",
    english: "The issue has not been solved yet.",
  },
  {
    japanese: "この映画はたくさんの人に愛されています。",
    english: "This movie is loved by many people.",
  },
  {
    japanese: "新しいルールがすべての社員に通知されました。",
    english: "The new rules were announced to all employees.",
  },
  {
    japanese: "これは私が昨日買った本です。",
    english: "This is the book that I bought yesterday.",
  },
  {
    japanese: "彼女が住んでいる家はとても大きいです。",
    english: "The house where she lives is very big.",
  },
  {
    japanese: "私が話した男性は医者です。",
    english: "The man whom I spoke to is a doctor.",
  },
  {
    japanese: "私が好きな映画は『インセプション』です。",
    english: "The movie that I like is 'Inception.'",
  },
  {
    japanese: "彼が働いている会社は有名です。",
    english: "The company where he works is famous.",
  },
  {
    japanese: "私たちが訪れた場所はとても美しかったです。",
    english: "The place we visited was very beautiful.",
  },
  {
    japanese: "これが彼女が作ったケーキです。",
    english: "This is the cake that she made.",
  },
  {
    japanese: "彼が昨日会った人々はとても親切でした。",
    english: "The people he met yesterday were very kind.",
  },
  {
    japanese: "彼が好きな色は青です。",
    english: "The color that he likes is blue.",
  },
  {
    japanese: "私が住んでいる街は静かです。",
    english: "The city where I live is quiet.",
  },
  {
    japanese: "ドアを閉めてください。",
    english: "Please close the door.",
  },
  {
    japanese: "もっと早く来てください。",
    english: "Please come earlier.",
  },
  {
    japanese: "これを忘れないでください！",
    english: "Don't forget this!",
  },
  {
    japanese: "彼を助けてください。",
    english: "Help him, please.",
  },
  {
    japanese: "素晴らしい眺めですね！",
    english: "What a beautiful view!",
  },
  {
    japanese: "なんて素敵なドレスなんでしょう！",
    english: "What a lovely dress!",
  },
  {
    japanese: "それを今すぐやりなさい。",
    english: "Do it right now.",
  },
  {
    japanese: "もっと一生懸命頑張りなさい！",
    english: "Work harder!",
  },
  {
    japanese: "なんて面白い本なんだ！",
    english: "What an interesting book!",
  },
  {
    japanese: "静かにしてください！",
    english: "Be quiet, please!",
  },
  {
    japanese: "私は早起きを楽しんでいます。",
    english: "I enjoy waking up early.",
  },
  {
    japanese: "彼は新しいスキルを学ぶことに興味があります。",
    english: "He is interested in learning new skills.",
  },
  {
    japanese: "あなたに会えてうれしいです。",
    english: "It's nice to meet you.",
  },
  {
    japanese: "彼女はピアノを弾く練習をしています。",
    english: "She is practicing playing the piano.",
  },
  {
    japanese: "私は旅行に行くのが好きです。",
    english: "I like going on trips.",
  },
  {
    japanese: "彼はその問題を解決しようとしています。",
    english: "He is trying to solve the problem.",
  },
  {
    japanese: "この本を読む価値があります。",
    english: "This book is worth reading.",
  },
  {
    japanese: "私は英語を話すことを改善したいです。",
    english: "I want to improve my English speaking.",
  },
  {
    japanese: "彼女は新しいプロジェクトを始めることを決めました。",
    english: "She decided to start a new project.",
  },
  {
    japanese: "車を運転することは難しいと思います。",
    english: "I think driving a car is difficult.",
  },
  {
    japanese: "私は外出したかったが、雨が降り始めた。",
    english: "I wanted to go out, but it started raining.",
  },
  {
    japanese: "彼は疲れていたので、早く寝ました。",
    english: "He was tired, so he went to bed early.",
  },
  {
    japanese: "私は家を出る前に朝食を食べました。",
    english: "I had breakfast before leaving the house.",
  },
  {
    japanese: "彼女は勉強を終えた後、友達と会いました。",
    english: "She met her friends after finishing her studies.",
  },
  {
    japanese: "もし雨が降ったら、ピクニックをキャンセルします。",
    english: "If it rains, we will cancel the picnic.",
  },
  {
    japanese: "私は英語が好きです、なぜならそれは面白いからです。",
    english: "I like English because it is interesting.",
  },
  {
    japanese: "あなたが忙しい間、私は待っています。",
    english: "While you are busy, I will wait.",
  },
  {
    japanese: "彼は一生懸命働いている一方で、休む時間をほとんど持っていません。",
    english: "Although he works hard, he has little time to rest.",
  },
  {
    japanese: "天気が良ければ、私たちはハイキングに行きます。",
    english: "We will go hiking as long as the weather is good.",
  },
  {
    japanese: "私は彼に会うためにパーティーに行きました。",
    english: "I went to the party so that I could meet him.",
  },
  {
    japanese: "ちょっと待って、すぐ戻るから。",
    english: "Hang on, I'll be right back.",
  },
  {
    japanese: "お腹が空いたね、何か食べようよ。",
    english: "I'm starving, let's grab something to eat.",
  },
  {
    japanese: "それ、本気で言ってるの？",
    english: "Are you serious?",
  },
  {
    japanese: "やばい、完全にそれ忘れてた！",
    english: "Oh no, I totally forgot about that!",
  },
  {
    japanese: "行くなら早くしよう！",
    english: "If we're going, let's hurry up!",
  },
  {
    japanese: "いい感じじゃない？",
    english: "Doesn't it look great?",
  },
  {
    japanese: "ちょっと考えさせて。",
    english: "Let me think about it.",
  },
  {
    japanese: "ちょっと待って、それはどういう意味？",
    english: "Wait a second, what do you mean by that?",
  },
  {
    japanese: "その映画、本当に最高だったよ。",
    english: "That movie was absolutely amazing.",
  },
  {
    japanese: "そんなに心配しなくていいよ。",
    english: "You don't need to worry so much.",
  },
  {
    japanese: "ちょっと考えすぎじゃない？",
    english: "Aren't you overthinking it?",
  },
  {
    japanese: "それ、めちゃくちゃ面白いね！",
    english: "That's hilarious!",
  },
  {
    japanese: "気にしないで、忘れちゃいなよ。",
    english: "Don't worry about it, just let it go.",
  },
  {
    japanese: "まじで？本当にそれ言ったの？",
    english: "Seriously? Did you really say that?",
  },
  {
    japanese: "あとで連絡するから。",
    english: "I'll hit you up later.",
  },
  {
    japanese: "これ、めっちゃカッコいいじゃん！",
    english: "This is so cool!",
  },
  {
    japanese: "そんなに焦らなくていいよ。",
    english: "No need to rush.",
  },
  {
    japanese: "とりあえずやってみようよ。",
    english: "Let's just give it a try.",
  },
  {
    japanese: "なんてこった、信じられない！",
    english: "Oh my gosh, I can't believe it!",
  },
  {
    japanese: "まあ、そういうこともあるよね。",
    english: "Well, it happens.",
  }
  ];


  // 単語分割関数
  function generateWordsFromEnglish(englishSentence) {
    // 空白・句読点などで分割
    const words = englishSentence.split(/([\s.,!?;":]+)/);
    // trimして不要要素を排除
    return words.map(w => w.trim()).filter(w => w !== "");
  }

  // 全部の文に対して分割単語を付与
  sentences.forEach(sentence => {
    sentence.words = generateWordsFromEnglish(sentence.english);
  });

  let currentSentenceIndex = 0;  // 今どの文を解いているか
  let currentIndex = 0;          // 次に正解すべき単語のインデックス
  let loadIndex = 0;             // 次にボタンへ補充する未使用単語のインデックス
  let typedWords = [];           // 正解済み単語
  let puzzleCompleted = false;

  // 「常時表示する5ボタン」用DOMと、その中に表示中の単語を保持する配列
  let buttonElements = [];
  let displayWords = new Array(5).fill(null); // ボタンに表示中の単語

  // 画面上の要素取得
  const japaneseSentence = document.getElementById("japanese-sentence");
  const sentenceBox      = document.getElementById("sentence-box");
  const wordButtons      = document.getElementById("word-buttons");
  const feedback         = document.getElementById("feedback");
  const hintButton       = document.getElementById("hint-button");
  const nextButton       = document.getElementById("next-button");
  const confettiContainer = document.getElementById("confetti-container");

  // ========= 新しい問題をロード =========
  function loadNewSentence() {
    puzzleCompleted = false;
    feedback.textContent = "";
    feedback.style.color = "";
    hintButton.style.display = "inline-block";
    nextButton.style.display = "none";
    typedWords = [];
    currentIndex = 0;
    loadIndex = 0;
    displayWords = new Array(5).fill(null);

    // ランダムに1問選択
    currentSentenceIndex = Math.floor(Math.random() * sentences.length);
    const sentenceData = sentences[currentSentenceIndex];

    // 日本語文表示
    japaneseSentence.textContent = sentenceData.japanese;
    // 入力済み表示エリアを空に
    sentenceBox.textContent = "";

    // ボタンを初期化
    wordButtons.innerHTML = "";
    buttonElements = [];

    // 最初に「未使用単語」を最大5つ取り出して、まとめてシャッフルしてセット
    initDisplayWords();

    // 5つのボタンを作成して画面に表示
    for (let i = 0; i < 5; i++) {
      const btn = document.createElement("button");
      btn.classList.add("word");

      // displayWords[i] があればテキストを設定、なければ空
      if (displayWords[i]) {
        btn.textContent = displayWords[i];
      } else {
        // 文章の単語数が5未満の場合など
        btn.textContent = "";
        btn.style.visibility = "hidden"; // 空枠を隠す
      }

      // クリックイベント（どのボタンを押したかiでわかるように）
      btn.addEventListener("click", () => handleWordClick(i));
      wordButtons.appendChild(btn);
      buttonElements.push(btn);
    }
  }

  // ========= 初期表示する5単語をシャッフルして displayWords にセット =========
  function initDisplayWords() {
    const sentenceData = sentences[currentSentenceIndex];
    const expectedWords = sentenceData.words;

    // 未使用単語があれば最大5個取り出す
    const chunk = [];
    for (let i = 0; i < 5; i++) {
      if (loadIndex < expectedWords.length) {
        chunk.push(expectedWords[loadIndex]);
        loadIndex++;
      }
    }
    // chunkをシャッフル
    const shuffled = shuffleArray(chunk);

    // displayWords 配列に代入
    for (let i = 0; i < shuffled.length; i++) {
      displayWords[i] = shuffled[i];
    }
    // 残り部分は null (fill済み)
  }

  // ========= ボタンクリック =========
  function handleWordClick(btnIndex) {
    if (puzzleCompleted) return;

    const sentenceData = sentences[currentSentenceIndex];
    const expectedWords = sentenceData.words;

    // 今正解が必要な単語
    const correctWord = expectedWords[currentIndex];

    // ユーザーがクリックした単語
    const clickedWord = displayWords[btnIndex];
    if (!clickedWord) return; // ボタンが空の場合など

    if (clickedWord === correctWord) {
      // 正解
      typedWords.push(clickedWord);
      currentIndex++;
      updateSentenceBox();

      feedback.textContent = "";
      feedback.style.color = "";

      // ボタン置き換え
      // まだ未使用の単語が残っているなら、それをこのボタンにセットする
      if (loadIndex < expectedWords.length) {
        const newWord = expectedWords[loadIndex];
        loadIndex++;
        displayWords[btnIndex] = newWord;
        buttonElements[btnIndex].textContent = newWord;
      } else {
        // もう残りの単語がない場合は、✔️にして無効化する
        displayWords[btnIndex] = null;
        buttonElements[btnIndex].textContent = "✔️";
        buttonElements[btnIndex].disabled = true;
        buttonElements[btnIndex].classList.add("used-up");
      }

      // 全部の単語を使い切ったらクリア
      if (currentIndex >= expectedWords.length) {
        puzzleCompleted = true;
        feedback.textContent = "正解です！おめでとう！";
        feedback.style.color = "green";
        hintButton.style.display = "none";
        nextButton.style.display = "inline-block";
        showConfetti();
      }
    } else {
      // 不正解
      feedback.textContent = "間違っています。";
      feedback.style.color = "red";
    }
  }

  // ========= ヒントボタン =========
  function showHint() {
    if (puzzleCompleted) return;
    const sentenceData = sentences[currentSentenceIndex];
    const expectedWords = sentenceData.words;
    if (currentIndex < expectedWords.length) {
      const nextWord = expectedWords[currentIndex];
      feedback.textContent = `ヒント: 次の単語は "${nextWord}" です。`;
      feedback.style.color = "blue";
    }
  }

  // ========= 入力済み単語の表示を更新 =========
  function updateSentenceBox() {
    sentenceBox.textContent = typedWords.join(" ");
  }

  // ========= 紙吹雪アニメーション =========
  function showConfetti() {
    confettiContainer.innerHTML = "";

    for (let i = 0; i < 50; i++) {
      const piece = document.createElement("div");
      piece.classList.add("confetti-piece");
      piece.style.backgroundColor = getRandomColor();
      piece.style.left = `${Math.random() * 100}vw`;
      piece.style.animationDelay = `${Math.random()}s`;
      piece.style.animationDuration = `${2 + Math.random() * 3}s`;
      confettiContainer.appendChild(piece);
    }
    confettiContainer.style.display = "block";

    setTimeout(() => {
      confettiContainer.style.display = "none";
    }, 4000);
  }

  function getRandomColor() {
    const colors = ["#fce18a", "#ff726d", "#b48def", "#f7cac9", "#88d8b0"];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  // ========= 配列シャッフル関数 =========
  function shuffleArray(array) {
    const arr = array.slice();
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // ========= イベントリスナー =========
  nextButton.addEventListener("click", loadNewSentence);
  hintButton.addEventListener("click", showHint);

  // ========= 初期ロード =========
  loadNewSentence();
</script>
</body>
</html>
